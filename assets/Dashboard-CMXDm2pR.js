import{a as h}from"./api-DZjo8B6_.js";import{_ as y}from"./YearMonth-CbiPgTWQ.js";import{d as v,r as c,k as _,l as g,c as r,e as t,j as w,g as D,F as N,f as S,t as l,b as n}from"./index-CuuZbu68.js";const V={class:"mx-10 mt-7 bg-white"},k={class:"text-3xl font-bold mb-2 text-center text-gray-800"},F={key:0,class:"text-center p-4"},B={key:1,class:"max-w-4xl mx-auto"},L={class:"w-full border-collapse border border-gray-200 rounded-lg shadow-md"},M={class:"border border-gray-200 p-2 font-medium"},z={class:"border border-gray-200 p-2 text-right"},A={class:"text-right p-2 font-bold"},C={class:"text-right p-2 font-bold"},E={class:"bg-gray-100"},H={class:"text-right p-2 font-bold text-xl"},R=v({__name:"Dashboard",setup(T){const b=new Date,o=c({year:b.getFullYear(),month:b.getMonth()+1}),u=c([]),m=c(!0),p=async()=>{console.log("fetch"),m.value=!0,u.value=await h.getInfoRowsSumForAllHouses(o.value.year,o.value.month).catch(()=>[]),m.value=!1};p(),_(o,p,{deep:!0});const i=g(()=>u.value.reduce((s,e)=>s+e.sum,0)),f=g(()=>i.value*.19),x=g(()=>i.value+f.value),d=s=>typeof s!="number"?"0,00":s.toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2});return(s,e)=>(n(),r("div",V,[t("h1",k,[e[1]||(e[1]=w(" Armaturenbrett ")),D(y,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a)},null,8,["modelValue"])]),m.value?(n(),r("div",F,e[2]||(e[2]=[t("p",{class:"text-gray-500"},"Daten werden geladen...",-1)]))):(n(),r("div",B,[t("table",L,[e[6]||(e[6]=t("thead",null,[t("tr",{class:"bg-gray-50"},[t("th",{class:"border border-gray-200 p-2 text-left"},"Haus"),t("th",{class:"border border-gray-200 p-2 text-right w-48"},"Summe Netto")])],-1)),t("tbody",null,[(n(!0),r(N,null,S(u.value,a=>(n(),r("tr",{key:a.houseName,class:"hover:bg-gray-50"},[t("td",M,l(a.houseName),1),t("td",z,l(d(a.sum))+" € ",1)]))),128))]),t("tfoot",null,[t("tr",null,[e[3]||(e[3]=t("td",{class:"text-right font-bold p-2"},"Summe netto",-1)),t("td",A,l(d(i.value))+" € ",1)]),t("tr",null,[e[4]||(e[4]=t("td",{class:"text-right font-bold p-2"},"zzgl. MwSt 19.00%",-1)),t("td",C,l(d(f.value))+" € ",1)]),t("tr",E,[e[5]||(e[5]=t("td",{class:"text-right font-bold p-2 text-xl"},"Gesamtsumme",-1)),t("td",H,l(d(x.value))+" € ",1)])])])]))]))}});export{R as default};
