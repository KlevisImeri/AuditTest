import{d as $,r as d,o as U,c as o,e as t,h,t as f,w as p,i as B,v as j,n as S,g as y,j as I,F as M,f as V,b as n}from"./index-CPRCAT8G.js";import{a as x}from"./api-Caf7j-qN.js";import{F as T}from"./FolderUpload-a3rSro7T.js";import{S as z,B as E}from"./Bin-sx6_BkIA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"container mx-auto p-4 max-w-2xl"},A={class:"bg-white rounded-lg shadow-xl p-8 border border-gray-200"},H={key:0,class:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 flex justify-between items-center",role:"alert"},J={key:1,class:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 flex justify-between items-center",role:"alert"},W={class:"mb-6"},q={for:"fileUpload",class:"cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-4 border border-gray-300 rounded-lg shadow-sm transition-colors inline-flex items-center"},K={key:0,class:"mt-4 text-sm text-green-600 font-semibold"},O={class:"flex items-center justify-center mt-8"},P=["disabled"],R={key:0},G={key:1},Q={class:"bg-white rounded-lg shadow-xl p-8 border border-gray-200 mt-8"},X={key:0,class:"space-y-2 max-h-100 overflow-y-auto"},Y={class:"text-gray-800"},Z=["onClick"],ee={key:1},ie=$({__name:"FileUpload",setup(te){const s=d(""),i=d(null),v=d(null),c=d(!1),g=d(!1),l=d(null),u=d(null),m=d([]),b=async()=>{try{l.value=null,m.value=await x.getFiles()}catch(a){l.value=`Fehler beim Abrufen der Dateiliste: ${a.message}`,console.error("Error fetching files:",a)}};U(b);const w=a=>{a.type==="application/pdf"?(i.value=a,s.value||(s.value=a.name.replace(/\.pdf$/i,"")),l.value=null):(l.value="Nur PDF-Dateien sind erlaubt.",i.value=null)},_=a=>{const e=a.target;e.files&&e.files[0]&&w(e.files[0])},D=()=>{g.value=!0},F=()=>{g.value=!1},k=a=>{var e;g.value=!1,(e=a.dataTransfer)!=null&&e.files[0]&&w(a.dataTransfer.files[0])},C=async()=>{if(!i.value||!s.value.trim()){l.value="Bitte geben Sie einen Dateinamen an und wählen Sie eine Datei aus.";return}c.value=!0,l.value=null,u.value=null;const a=new FormData;a.append("file",i.value);const e=s.value.trim().endsWith(".pdf")?s.value.trim():`${s.value.trim()}.pdf`;a.append("name",e);try{const r=await x.uploadFile(a);u.value=`Datei erfolgreich hochgeladen: ${r.name}`,s.value="",i.value=null,v.value&&(v.value.value=""),await b()}catch(r){l.value=`Fehler beim Hochladen: ${r.message}`,console.error("Upload error:",r)}finally{c.value=!1}},N=async a=>{try{l.value=null,await x.deleteFileById(a),await b()}catch(e){l.value=`Fehler beim Löschen der Datei: ${e.message}`,console.error("Error deleting file:",e)}};return(a,e)=>(n(),o("div",L,[t("div",A,[e[6]||(e[6]=t("h2",{class:"text-3xl font-bold mb-6 text-center text-gray-800"},"Datei hochladen",-1)),u.value?(n(),o("div",H,[t("p",null,f(u.value),1),t("button",{onClick:e[0]||(e[0]=r=>u.value=null),class:"font-bold text-lg"},"×")])):h("",!0),l.value?(n(),o("div",J,[t("p",null,f(l.value),1),t("button",{onClick:e[1]||(e[1]=r=>l.value=null),class:"font-bold text-lg"},"×")])):h("",!0),t("form",{onSubmit:p(C,["prevent"])},[t("div",W,[e[3]||(e[3]=t("label",{for:"fileName",class:"block text-gray-700 text-sm font-semibold mb-2"},"Dateiname",-1)),B(t("input",{id:"fileName","onUpdate:modelValue":e[2]||(e[2]=r=>s.value=r),type:"text",placeholder:"Rechnung_Januar_2024",required:"",class:"shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-gray-300"},null,512),[[j,s.value]])]),t("div",{onDragover:p(D,["prevent"]),onDragleave:p(F,["prevent"]),onDrop:p(k,["prevent"]),class:S(["border-2 border-dashed rounded-lg p-8 text-center transition-colors",g.value?"border-gray-400 bg-gray-100":"border-gray-300 bg-gray-50"])},[e[5]||(e[5]=t("p",{class:"text-gray-500 mb-4"},"Datei hierher ziehen oder",-1)),t("label",q,[y(T,{class:"h-5 w-5 mr-2"}),e[4]||(e[4]=I(" Datei auswählen "))]),t("input",{id:"fileUpload",ref_key:"fileInput",ref:v,type:"file",accept:"application/pdf",onChange:_,class:"hidden"},null,544),i.value?(n(),o("p",K," Ausgewählt: "+f(i.value.name),1)):h("",!0)],34),t("div",O,[t("button",{type:"submit",disabled:c.value||!i.value||!s.value,class:"w-full bg-white text-gray-800 p-4 rounded-lg shadow-lg hover:shadow-xl border border-gray-200 transition-all duration-200 ease-in-out hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 flex items-center justify-center"},[y(z,{class:"h-6 w-6 mr-2"}),c.value?(n(),o("span",R,"Wird hochgeladen...")):(n(),o("span",G,"Jetzt hochladen"))],8,P)])],32)]),t("div",Q,[e[8]||(e[8]=t("h3",{class:"text-2xl font-bold mb-4 text-gray-800"},"Hochgeladene Dateien",-1)),m.value.length>0?(n(),o("ul",X,[(n(!0),o(M,null,V(m.value,r=>(n(),o("li",{key:r.id,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-gray-200"},[t("span",Y,f(r.name),1),t("button",{onClick:ae=>N(r.id),class:"text-red-500 hover:text-red-700"},[y(E,{class:"h-5 w-5"})],8,Z)]))),128))])):(n(),o("div",ee,e[7]||(e[7]=[t("p",{class:"text-gray-500 text-center"},"Keine Dateien gefunden.",-1)])))])]))}});export{ie as default};
